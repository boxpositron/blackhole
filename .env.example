# ======================================
# Pi-hole + Tailscale Configuration
# ======================================
# Copy this file to .env and fill in your values
# Command: cp .env.example .env

# ======================================
# REQUIRED: Tailscale Configuration
# ======================================
# SECURITY: Generate auth key with proper settings in Tailscale admin console
#
# Get your auth key from: https://login.tailscale.com/admin/settings/keys
#
# IMPORTANT: Configure these settings when creating the key:
# - Reusable: YES (required for Docker containers)
# - Ephemeral: NO (use docker-compose environment variables instead)
# - Pre-approved: YES (auto-approve without manual intervention)
# - Tags: tag:dns (for ACL management)
# - Expiration: 90 days or Never
#
# DO NOT append ?ephemeral=true or other parameters to the key!
# The key should look like: tskey-auth-xxxxxxxxxxxxx-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
#
# After deployment, disable key expiry in Tailscale admin console to prevent
# disconnection after the initial expiry period.
TS_AUTHKEY=tskey-auth-xxxxxxxxxxxxx-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ======================================
# REQUIRED: Pi-hole Settings
# ======================================
# CRITICAL SECURITY: You MUST change this password!
#
# Password Requirements:
#   - Minimum 20 characters
#   - Mix of uppercase, lowercase, numbers, and symbols
#   - No dictionary words
#   - Unique (not reused from other services)
#
# Generate a secure password (choose one method):
#   openssl rand -base64 32
#   pwgen -s 32 1
#
# Example output: xK9mP2nQ7vL4wR8tY6uI5oP3aS1dF0gH2jK4lM6nB8vC
#
# NEVER use the example below - generate your own!
# Store in password manager (1Password, Bitwarden, etc.)
#
PIHOLE_PASSWORD=REPLACE_THIS_WITH_OUTPUT_FROM_OPENSSL_COMMAND_ABOVE

# ======================================
# Timezone Configuration
# ======================================
# Find your timezone: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
# Examples: America/New_York, Europe/London, Asia/Tokyo, America/Los_Angeles
TZ=America/New_York

# ======================================
# DNS Upstream Servers
# ======================================
# DNS upstreams are now configured via Pi-hole web interface (Settings > DNS)
# This avoids Docker environment variable issues and gives you full control
#
# Recommended options to configure in Pi-hole:
# Cloudflare (Fast): 1.1.1.1, 1.0.0.1
# Google (Fast): 8.8.8.8, 8.8.4.4
# Quad9 (Privacy): 9.9.9.9, 149.112.112.112
# Mullvad (Privacy): 194.242.2.2, 193.19.108.2
# DNS_UPSTREAMS=9.9.9.9;149.112.112.112  # Commented out - configure in Pi-hole instead

# ======================================
# Performance Settings
# ======================================
# DNS Cache Size (number of entries)
# Default: 10000, Recommended: 25000-50000
CACHE_SIZE=25000

# Maximum cache time in seconds
# Default: 3600 (1 hour)
MAX_CACHE_TIME=3600

# Serve stale cache while refreshing
# Options: true, false
CACHE_OPTIMISTIC=true

# Rate limiting (queries per minute per IP)
# Format: queries/seconds
# SECURITY: Reduced from 1000/60 to prevent DNS amplification attacks
# Default: 100/60 (100 queries per 60 seconds)
RATE_LIMIT=100/60

# Maximum concurrent DNS queries
# SECURITY: Reduced from 150 to prevent resource exhaustion
# Default: 50
MAX_CONCURRENT=50

# ======================================
# Privacy and Logging
# ======================================
# PRIVACY WARNING: DNS query logs contain sensitive browsing history!
#
# Query logs reveal:
#   - Every website visited
#   - Personal habits and patterns
#   - Potentially sensitive information
#
# Legal Considerations:
#   - May require GDPR compliance (EU)
#   - May require CCPA compliance (California)
#   - Logs are considered personal data
#
# Enable query logging
# Options: true, false
# Recommendation: false for maximum privacy, or true with minimal retention
QUERY_LOGGING=true

# Database retention period (days)
# SECURITY/PRIVACY: Reduced from 365 to 7 days
# Recommendation: 7 days for troubleshooting, or 1 day for privacy
# Default: 7
DB_RETENTION_DAYS=7

# Database write interval (minutes)
# Default: 1.0
DB_INTERVAL=1.0

# ======================================
# Network Settings
# ======================================
# Enable IPv6 support
# Options: true, false
ENABLE_IPV6=true

# Virtual hostname for web interface
# This is just a label, access via Tailscale IP
VIRTUAL_HOST=pihole.local

# ======================================
# Advanced Settings (Optional)
# ======================================
# Additional Tailscale arguments
# Default includes: --accept-dns=false --advertise-tags=tag:dns --ssh
# TS_EXTRA_ARGS=--accept-dns=false --advertise-tags=tag:dns --ssh

# ======================================
# Resource Limits (Defined in docker-compose.yml)
# ======================================
# CPU Limit: 2 cores
# Memory Limit: 512M
# CPU Reservation: 0.5 cores
# Memory Reservation: 256M
# Adjust in docker-compose.yml if needed
